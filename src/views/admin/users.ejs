<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CP KKU Study Notes</title>
  <link rel="stylesheet" href="/style.css"/>
</head>
<body>

<main class="container">
<h2>จัดการผู้ใช้</h2>
<table class="table">
  <tr><th>ชื่อผู้ใช้</th><th>อีเมล</th><th>บทบาท</th><th>จัดการ</th></tr>
  <% users.forEach(u=>{ %>
    <tr>
      <td><%= u.username %></td>
      <td><%= u.email %></td>
      <td><%= u.role %></td>
      <td class="row">
        <form method="post" action="/admin/users/<%= u._id %>/role">
          <select name="role">
            <option value="user" <%= u.role==='user'?'selected':'' %>>user</option>
            <option value="admin" <%= u.role==='admin'?'selected':'' %>>admin</option>
          </select>
          <button>อัปเดต</button>
        </form>
        <form method="post" action="/admin/users/<%= u._id %>/delete" onsubmit="return confirm('ลบผู้ใช้นี้?')">
          <button class="danger">ลบ</button>
        </form>
      </td>
    </tr>
  <% }) %>
</table>
</main>
</body>
</html>
